<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa da Sua Ansiedade - Quiz Interativo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            padding: 40px 30px;
        }

        .intro {
            text-align: center;
            margin-bottom: 30px;
        }

        .intro h2 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .intro p {
            color: #666;
            line-height: 1.6;
            font-size: 1.05em;
        }

        .start-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 30px auto;
            padding: 18px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .quiz-section {
            display: none;
        }

        .quiz-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .question-card {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .question-card h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .question-number {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateX(5px);
        }

        .option input[type="checkbox"],
        .option input[type="radio"] {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            font-size: 1.05em;
            color: #444;
        }

        .option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .intensity-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .intensity-scale input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        .intensity-scale input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
        }

        .intensity-scale input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
            border: none;
        }

        .intensity-value {
            font-weight: bold;
            color: #667eea;
            font-size: 1.5em;
            min-width: 50px;
            text-align: center;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #666;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        /* --- New Result Styles --- */
        .results.active { display: block; animation: fadeIn 0.5s; }
        .results h2 { color: #667eea; text-align: center; margin-bottom: 20px; font-size: 2em; }
        .results .result-section { background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 25px; border-left: 5px solid #667eea; }
        .results .result-section h3 { color: #667eea; margin-bottom: 15px; font-size: 1.5em; display: flex; align-items: center; gap: 10px; }
        .results .result-section p.educational-text { color: #555; line-height: 1.6; margin-bottom: 20px; font-style: italic; }
        .results ul { list-style: none; padding-left: 0; }
        .results ul li { background: white; padding: 12px 18px; border-radius: 8px; margin-bottom: 8px; border: 1px solid #eee; color: #444; }
        
        .anxiety-cycle { background: #f0f4ff; padding: 20px; border-radius: 15px; border: 2px dashed #667eea; }
        .anxiety-cycle ol { list-style-type: none; padding-left: 0; counter-reset: cycle-counter; }
        .anxiety-cycle li { padding: 10px; position: relative; padding-left: 45px; margin-bottom: 10px; }
        .anxiety-cycle li:before {
            counter-increment: cycle-counter;
            content: counter(cycle-counter);
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            background: #667eea;
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .anxiety-cycle li:not(:last-child):after {
            content: '‚Üí';
            position: absolute;
            left: 12px;
            bottom: -5px;
            color: #667eea;
            font-size: 1.5em;
        }
        .anxiety-cycle p { margin-top: 15px; font-weight: bold; color: #5a5a9c; }

        .action-plan ul li { padding-left: 35px; position: relative; }
        .action-plan ul li:before { content: 'üí°'; position: absolute; left: 10px; top: 12px; }
        
        .alert-box { background: #fff3cd; border: 1px solid #ffeeba; padding: 20px; border-radius: 10px; margin-top: 20px; color: #856404; }
        .alert-box strong { display: block; margin-bottom: 5px; }

        .restart-btn {
            display: block; width: 100%; max-width: 300px; margin: 40px auto 0; padding: 15px 40px; background: white;
            color: #667eea; border: 2px solid #667eea; border-radius: 50px; font-size: 1.1em; font-weight: bold;
            cursor: pointer; transition: all 0.3s;
        }
        .restart-btn:hover { background: #667eea; color: white; transform: translateY(-2px); }

        @media (max-width: 768px) {
            .header h1 { font-size: 1.8em; }
            .content { padding: 30px 20px; }
            .nav-buttons { flex-direction: column; }
            .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß≠ Mapa da Sua Ansiedade</h1>
            <p>Descubra seus gatilhos e sintomas de ansiedade</p>
        </div>

        <div class="content">
            <div class="intro" id="intro">
                <h2>Bem-vindo ao Quiz Interativo</h2>
                <p>Este question√°rio foi desenvolvido para ajud√°-lo a identificar seus gatilhos pessoais de ansiedade e reconhecer os sintomas que voc√™ experimenta. O autoconhecimento √© o primeiro passo para gerenciar a ansiedade de forma eficaz.</p>
                <p style="margin-top: 15px;"><strong>Importante:</strong> Este quiz √© uma ferramenta educacional e n√£o substitui avalia√ß√£o profissional.</p>
                <button class="start-btn" id="startBtn">Come√ßar o Quiz</button>
            </div>

            <div class="quiz-section" id="quiz">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress"></div>
                </div>
                <div id="questionsContainer"></div>
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="prevBtn" style="display: none;">‚Üê Anterior</button>
                    <button class="btn btn-primary" id="nextBtn">Pr√≥xima ‚Üí</button>
                </div>
            </div>

            <div class="results" id="results"></div>
        </div>
    </div>

    <script>
        const questions = [
             {
                category: "Gatilhos: Situa√ß√µes Sociais",
                question: "Quais dessas situa√ß√µes sociais causam ansiedade em voc√™?",
                type: "multiple",
                options: [ "Falar em p√∫blico ou fazer apresenta√ß√µes", "Ir a festas ou eventos com muitas pessoas", "Conhecer pessoas novas", "Conversar em grupos grandes", "Ser o centro das aten√ß√µes", "Fazer ou receber cr√≠ticas", "Confrontos ou discuss√µes", "Nenhuma dessas situa√ß√µes me causa ansiedade" ]
            },
            { category: "Intensidade", question: "Qual o n√≠vel de intensidade da ansiedade nas situa√ß√µes sociais? (0 = nenhuma, 10 = extrema)", type: "scale", options: [] },
            {
                category: "Gatilhos: Ambientes e Lugares",
                question: "Quais ambientes ou lugares disparam sua ansiedade?",
                type: "multiple",
                options: [ "Lugares fechados ou apertados (elevadores, avi√µes)", "Lugares muito abertos ou vazios", "Multid√µes e aglomera√ß√µes", "Hospitais ou consult√≥rios m√©dicos", "Local de trabalho", "Shopping centers lotados", "Transporte p√∫blico", "Nenhum lugar espec√≠fico me causa ansiedade" ]
            },
            { category: "Intensidade", question: "Intensidade da ansiedade relacionada a lugares (0-10):", type: "scale", options: [] },
            {
                category: "Gatilhos: Trabalho e Estudo",
                question: "Quais situa√ß√µes de trabalho ou estudo causam ansiedade?",
                type: "multiple",
                options: [ "Prazos apertados", "Excesso de trabalho ou responsabilidades", "Apresenta√ß√µes ou reuni√µes importantes", "Avalia√ß√µes de desempenho", "Conflitos com colegas ou superiores", "Medo de cometer erros", "Press√£o por resultados", "Provas e exames", "N√£o tenho ansiedade relacionada ao trabalho/estudo" ]
            },
            { category: "Intensidade", question: "Intensidade da ansiedade no trabalho/estudo (0-10):", type: "scale", options: [] },
            {
                category: "Gatilhos: Pensamentos",
                question: "Quais tipos de pensamentos disparam sua ansiedade?",
                type: "multiple",
                options: [ "Pensamentos catastr√≥ficos ('e se acontecer o pior?')", "Preocupa√ß√µes sobre o futuro", "Rumina√ß√£o sobre erros do passado", "Antecipa√ß√£o de perigos que podem n√£o acontecer", "Perfeccionismo excessivo", "Autocr√≠tica severa ('n√£o sou bom o suficiente')", "Medo de fracassar", "Compara√ß√£o com outras pessoas", "Meus pensamentos raramente causam ansiedade" ]
            },
            {
                category: "Gatilhos: F√≠sicos e Sa√∫de",
                question: "Quais fatores f√≠sicos aumentam sua ansiedade?",
                type: "multiple",
                options: [ "Consumo excessivo de cafe√≠na", "Falta de sono ou sono de m√° qualidade", "Fome ou hipoglicemia", "Uso de √°lcool", "Altera√ß√µes hormonais (TPM, menopausa)", "Sentir o cora√ß√£o acelerar (por qualquer motivo)", "Dores ou sensa√ß√µes corporais incomuns", "Fatores f√≠sicos n√£o influenciam minha ansiedade" ]
            },
            {
                category: "Sintomas: F√≠sicos",
                question: "Quais sintomas f√≠sicos voc√™ experimenta quando est√° ansioso?",
                type: "multiple",
                options: [ "Cora√ß√£o acelerado (taquicardia)", "Falta de ar ou respira√ß√£o acelerada", "Suor excessivo (m√£os, p√©s, corpo)", "Tremores nas m√£os ou pernas", "Tens√£o ou dores musculares", "N√°useas ou desconforto estomacal", "Dores de cabe√ßa ou enxaquecas", "Tontura ou vertigem", "Sensa√ß√£o de n√≥ na garganta", "Formigamento nas extremidades", "N√£o tenho sintomas f√≠sicos significativos" ]
            },
            {
                category: "Sintomas: Psicol√≥gicos",
                question: "Quais sintomas mentais e emocionais voc√™ apresenta?",
                type: "multiple",
                options: [ "Preocupa√ß√£o excessiva e constante", "Pensamentos acelerados", "Dificuldade de concentra√ß√£o", "Sensa√ß√£o de 'mente em branco'", "Medo intenso desproporcional", "Sensa√ß√£o de perigo iminente", "Irritabilidade aumentada", "Inquieta√ß√£o constante", "Dificuldade para tomar decis√µes", "Medo de perder o controle", "Raramente tenho sintomas psicol√≥gicos" ]
            },
            {
                category: "Sintomas: Comportamentais",
                question: "Como voc√™ tende a reagir comportamentalmente √† ansiedade?",
                type: "multiple",
                options: [ "Evito situa√ß√µes que causam ansiedade", "Procrastino tarefas importantes", "Me isolo socialmente", "Verifico coisas repetidamente", "Busco reasseguramento constante de outras pessoas", "Tenho dificuldade de sair de casa", "Falo r√°pido demais ou muito", "Evito contato visual", "Meu comportamento n√£o muda significativamente" ]
            },
            {
                category: "Frequ√™ncia",
                question: "Com que frequ√™ncia voc√™ experimenta sintomas de ansiedade?",
                type: "single",
                options: [ "Raramente (algumas vezes por ano)", "Ocasionalmente (algumas vezes por m√™s)", "Frequentemente (v√°rias vezes por semana)", "Diariamente ou quase todos os dias)", "Constantemente (v√°rias vezes ao dia)" ]
            },
            {
                category: "Impacto",
                question: "Quanto a ansiedade interfere nas suas atividades di√°rias?",
                type: "single",
                options: [ "N√£o interfere", "Interfere pouco", "Interfere moderadamente", "Interfere bastante", "Interfere gravemente" ]
            }
        ];

        let currentQuestion = 0;
        let answers = {};

        document.getElementById('startBtn').addEventListener('click', startQuiz);
        document.getElementById('prevBtn').addEventListener('click', previousQuestion);
        document.getElementById('nextBtn').addEventListener('click', nextQuestion);

        function startQuiz() {
            document.getElementById('intro').style.display = 'none';
            document.getElementById('quiz').classList.add('active');
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            const container = document.getElementById('questionsContainer');
            
            let html = `<div class="question-card">
                <span class="question-number">Quest√£o ${currentQuestion + 1} de ${questions.length}</span>
                <p style="color: #667eea; font-weight: 600; margin-bottom: 15px; font-size: 1.1em;">${q.category}</p>
                <h3>${q.question}</h3>`;

            if (q.type === 'multiple') {
                html += '<div class="options">';
                q.options.forEach((option, index) => {
                    const isChecked = answers[currentQuestion]?.includes(index);
                    const selectedClass = isChecked ? 'selected' : '';
                    html += `<div class="option ${selectedClass}" data-index="${index}">
                            <input type="checkbox" id="opt${index}" ${isChecked ? 'checked' : ''}>
                            <label for="opt${index}">${option}</label>
                        </div>`;
                });
                html += '</div>';
            } else if (q.type === 'scale') {
                const value = answers[currentQuestion] !== undefined ? answers[currentQuestion] : 5;
                html += `<div class="intensity-scale">
                        <span style="color: #888; font-weight: 600;">0</span>
                        <input type="range" min="0" max="10" value="${value}" id="scaleInput">
                        <span style="color: #888; font-weight: 600;">10</span>
                        <div class="intensity-value" id="scaleValue">${value}</div>
                    </div>`;
            } else if (q.type === 'single') {
                html += '<div class="options">';
                q.options.forEach((option, index) => {
                    const isChecked = answers[currentQuestion] === index;
                    const selectedClass = isChecked ? 'selected' : '';
                    html += `<div class="option ${selectedClass}" data-index="${index}">
                            <input type="radio" name="single${currentQuestion}" id="opt${index}" ${isChecked ? 'checked' : ''}>
                            <label for="opt${index}">${option}</label>
                        </div>`;
                });
                html += '</div>';
            }

            html += '</div>';
            container.innerHTML = html;

            if (q.type === 'multiple') {
                document.querySelectorAll('.option').forEach(opt => {
                    opt.addEventListener('click', function(e) {
                        if (e.target.tagName === 'INPUT') return;
                        const index = parseInt(this.getAttribute('data-index'));
                        const checkbox = this.querySelector('input[type="checkbox"]');
                        checkbox.checked = !checkbox.checked;
                        if (!answers[currentQuestion]) answers[currentQuestion] = [];
                        const idx = answers[currentQuestion].indexOf(index);
                        if (checkbox.checked && idx === -1) answers[currentQuestion].push(index);
                        else if (!checkbox.checked && idx > -1) answers[currentQuestion].splice(idx, 1);
                        this.classList.toggle('selected', checkbox.checked);
                    });
                });
            } else if (q.type === 'scale') {
                const scaleInput = document.getElementById('scaleInput');
                scaleInput.addEventListener('input', () => { document.getElementById('scaleValue').textContent = scaleInput.value; });
                scaleInput.addEventListener('change', () => { answers[currentQuestion] = parseInt(scaleInput.value); });
                if(answers[currentQuestion] === undefined) answers[currentQuestion] = 5;
            } else if (q.type === 'single') {
                document.querySelectorAll('.option').forEach(opt => {
                    opt.addEventListener('click', function(e) {
                         if (e.target.tagName === 'INPUT') return;
                        const index = parseInt(this.getAttribute('data-index'));
                        this.querySelector('input[type="radio"]').checked = true;
                        answers[currentQuestion] = index;
                        document.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
                        this.classList.add('selected');
                    });
                });
            }
            updateProgress();
            updateButtons();
        }
        
        function updateProgress() {
            document.getElementById('progress').style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
        }

        function updateButtons() {
            document.getElementById('prevBtn').style.display = currentQuestion > 0 ? 'block' : 'none';
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'Ver Resultados ‚úì' : 'Pr√≥xima ‚Üí';
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }

        function restartQuiz() {
            currentQuestion = 0;
            answers = {};
            document.getElementById('results').innerHTML = '';
            document.getElementById('results').classList.remove('active');
            document.getElementById('intro').style.display = 'block';
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // =================================================================
        // ======================= NEW SHOWRESULTS FUNCTION =================
        // =================================================================
        function showResults() {
            document.getElementById('quiz').classList.remove('active');
            const resultsContainer = document.getElementById('results');
            
            // --- 1. GATHER DATA ---
            const socialTriggers = answers[0] || [];
            const socialIntensity = answers[1] ?? 5;
            const placeTriggers = answers[2] || [];
            const workTriggers = answers[4] || [];
            const workIntensity = answers[5] ?? 5;
            const thoughtTriggers = answers[6] || [];
            const physicalHealthTriggers = answers[7] || [];
            const physicalSymptoms = answers[8] || [];
            const psychSymptoms = answers[9] || [];
            const behavSymptoms = answers[10] || [];
            const frequency = answers[11] ?? 0;
            const impact = answers[12] ?? 0;

            let html = `<h2>üìä Seu Mapa Detalhado da Ansiedade</h2>`;

            // --- 2. GENERATE ANXIETY PROFILE ---
            const profile = generateAnxietyProfile();
            html += `<div class="result-section">
                        <h3>${profile.title}</h3>
                        <p class="educational-text">${profile.description}</p>
                     </div>`;

            // --- 3. GENERATE TRIGGERS SECTION ---
            html += generateTriggersHtml();

            // --- 4. GENERATE SYMPTOMS SECTION ---
            html += generateSymptomsHtml();

            // --- 5. GENERATE ANXIETY CYCLE ---
            html += generateAnxietyCycleHtml();
            
            // --- 6. GENERATE ACTION PLAN ---
            html += generateActionPlanHtml();
            
            // --- Final Elements ---
            if (frequency >= 3 || impact >= 3) {
                html += `<div class="alert-box">
                           <strong>Recomenda√ß√£o Importante</strong>
                           Seus resultados indicam que a ansiedade est√° impactando sua vida de forma significativa. Considerar a ajuda de um profissional de sa√∫de mental (psic√≥logo ou psiquiatra) √© um passo corajoso e muito eficaz.
                         </div>`;
            }
            html += `<button class="restart-btn" id="restartBtn">üîÑ Refazer o Quiz</button>`;

            resultsContainer.innerHTML = html;
            resultsContainer.classList.add('active');
            document.getElementById('restartBtn').addEventListener('click', restartQuiz);
            window.scrollTo({top: 0, behavior: 'smooth'});

            // --- HELPER FUNCTIONS ---
            function getListItems(questionIndex, answersArray, noneIndex) {
                if (!answersArray || answersArray.length === 0 || (answersArray.length === 1 && answersArray.includes(noneIndex))) {
                    return '';
                }
                return answersArray
                    .filter(i => i !== noneIndex)
                    .map(i => `<li>${questions[questionIndex].options[i]}</li>`)
                    .join('');
            }

            function generateAnxietyProfile() {
                const scores = {
                    social: socialTriggers.filter(i => i !== 7).length * (socialIntensity / 10),
                    work: workTriggers.filter(i => i !== 8).length * (workIntensity / 10),
                    thoughts: thoughtTriggers.filter(i => i !== 8).length,
                    physical: physicalSymptoms.filter(i => i !== 10).length
                };
                const dominantProfile = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);

                let profileData = { title: "Perfil: Ansiedade Generalizada", description: "Sua ansiedade parece se manifestar em diversas √°reas da vida, com uma mistura de gatilhos e sintomas. Isso indica um estado de alerta constante, onde diferentes situa√ß√µes podem ativar sua resposta de ansiedade." };

                if (scores[dominantProfile] > 2) {
                    switch (dominantProfile) {
                        case 'social':
                            profileData = { title: "Perfil: Foco em Ansiedade Social", description: "Seu mapa indica que as intera√ß√µes sociais s√£o a principal fonte de sua ansiedade. O medo de julgamento e a press√£o em situa√ß√µes com outras pessoas parecem ser o motor que ativa suas respostas ansiosas, tanto mentais quanto f√≠sicas." };
                            break;
                        case 'work':
                            profileData = { title: "Perfil: Foco em Desempenho e Press√£o", description: "Seus gatilhos mais fortes est√£o ligados ao ambiente de trabalho ou estudo. A press√£o por prazos, o medo de falhar e a busca por resultados parecem alimentar um ciclo de preocupa√ß√£o e estresse que se manifesta como ansiedade." };
                            break;
                        case 'thoughts':
                            profileData = { title: "Perfil: Gatilhos Internos e Preocupa√ß√£o", description: "Sua ansiedade parece ser fortemente alimentada por padr√µes de pensamento. Preocupa√ß√µes com o futuro, autocr√≠tica e pensamentos catastr√≥ficos s√£o os principais gatilhos que iniciam a espiral de ansiedade, mesmo sem um fator externo aparente." };
                            break;
                        case 'physical':
                             profileData = { title: "Perfil: Alta Resposta F√≠sica", description: "Sua experi√™ncia de ansiedade √© marcadamente f√≠sica. Voc√™ sente a ansiedade de forma intensa no corpo, com sintomas que podem ser assustadores. Isso sugere que seu sistema de 'luta ou fuga' √© ativado de forma muito r√°pida e potente." };
                            break;
                    }
                }
                return profileData;
            }

            function generateTriggersHtml() {
                let triggersHtml = '<div class="result-section"><h3>üéØ Mapeando Seus Gatilhos</h3>';
                const socialList = getListItems(0, socialTriggers, 7);
                const placeList = getListItems(2, placeTriggers, 7);
                const workList = getListItems(4, workTriggers, 8);
                const thoughtList = getListItems(6, thoughtTriggers, 8);
                const physicalHealthList = getListItems(7, physicalHealthTriggers, 7);
                
                if (socialList) triggersHtml += `<h4>Gatilhos Sociais (Intensidade: ${socialIntensity}/10)</h4><p class="educational-text">Medo de ser julgado ou avaliado negativamente em intera√ß√µes.</p><ul>${socialList}</ul>`;
                if (workList) triggersHtml += `<h4>Gatilhos de Desempenho (Intensidade: ${workIntensity}/10)</h4><p class="educational-text">Press√£o por resultados e medo de falhar no trabalho ou estudos.</p><ul>${workList}</ul>`;
                if (thoughtList) triggersHtml += `<h4>Gatilhos de Pensamento</h4><p class="educational-text">Padr√µes de pensamento que iniciam a ansiedade de dentro para fora.</p><ul>${thoughtList}</ul>`;
                if (placeList) triggersHtml += `<h4>Gatilhos de Ambiente</h4><p class="educational-text">Lugares ou contextos espec√≠ficos que disparam o alerta de perigo.</p><ul>${placeList}</ul>`;
                if (physicalHealthList) triggersHtml += `<h4>Gatilhos F√≠sicos e de Sa√∫de</h4><p class="educational-text">Fatores corporais ou de estilo de vida que podem desregular seu sistema nervoso.</p><ul>${physicalHealthList}</ul>`;
                
                if (!socialList && !placeList && !workList && !thoughtList && !physicalHealthList) triggersHtml += "<p>Voc√™ n√£o identificou gatilhos espec√≠ficos, o que pode indicar uma ansiedade mais generalizada.</p>";
                
                return triggersHtml + '</div>';
            }

            function generateSymptomsHtml() {
                let symptomsHtml = '<div class="result-section"><h3>‚ö†Ô∏è Como a Ansiedade se Manifesta</h3>';
                const physicalList = getListItems(8, physicalSymptoms, 10);
                const psychList = getListItems(9, psychSymptoms, 10);
                const behavList = getListItems(10, behavSymptoms, 8);

                if (physicalList) symptomsHtml += `<h4>Sintomas F√≠sicos</h4><p class="educational-text">A resposta de "luta ou fuga" do seu corpo, preparando-o para uma amea√ßa percebida.</p><ul>${physicalList}</ul>`;
                if (psychList) symptomsHtml += `<h4>Sintomas Psicol√≥gicos</h4><p class="educational-text">A tentativa da sua mente de antecipar e controlar o perigo, resultando em um estado de alerta mental.</p><ul>${psychList}</ul>`;
                if (behavList) symptomsHtml += `<h4>Sintomas Comportamentais</h4><p class="educational-text">As a√ß√µes que voc√™ toma para tentar evitar ou reduzir o desconforto da ansiedade.</p><ul>${behavList}</ul>`;
                
                if (!physicalList && !psychList && !behavList) symptomsHtml += "<p>Voc√™ n√£o reportou sintomas espec√≠ficos de ansiedade.</p>";

                return symptomsHtml + '</div>';
            }

            function generateAnxietyCycleHtml() {
                const trigger = questions[4].options[workTriggers.filter(i => i !== 8)[0]] || questions[0].options[socialTriggers.filter(i => i !== 7)[0]];
                const thought = questions[9].options[psychSymptoms.filter(i => i !== 10)[0]];
                const physical = questions[8].options[physicalSymptoms.filter(i => i !== 10)[0]];
                const behavior = questions[10].options[behavSymptoms.filter(i => i !== 8)[0]];

                if (!trigger || !thought || !physical || !behavior) return '';

                return `<div class="result-section">
                            <h3>üîÑ O Ciclo da Sua Ansiedade</h3>
                            <div class="anxiety-cycle">
                                <ol>
                                    <li><strong>Gatilho:</strong> Uma situa√ß√£o como "<strong>${trigger}</strong>" acontece.</li>
                                    <li><strong>Pensamento/Sintoma:</strong> Sua mente reage com "<strong>${thought}</strong>".</li>
                                    <li><strong>Sensa√ß√£o F√≠sica:</strong> Seu corpo responde com "<strong>${physical}</strong>".</li>
                                    <li><strong>Comportamento:</strong> Para lidar com isso, voc√™ tende a "<strong>${behavior}</strong>".</li>
                                </ol>
                                <p>Este ciclo, ao evitar o desconforto, acaba refor√ßando a ansiedade a longo prazo. Reconhec√™-lo √© o primeiro passo para quebr√°-lo.</p>
                            </div>
                        </div>`;
            }

            function generateActionPlanHtml() {
                 let planHtml = '<div class="result-section action-plan"><h3>‚úÖ Seu Plano de A√ß√£o Personalizado</h3>';
                 let recommendations = new Set(); // Use a Set to avoid duplicate recommendations

                 if (socialTriggers.filter(i => i !== 7).length > 0) recommendations.add("Pratique a Exposi√ß√£o Gradual: Comece com intera√ß√µes sociais pequenas e de baixo risco para ensinar ao seu c√©rebro que voc√™ est√° seguro.");
                 if (workTriggers.filter(i => i !== 8).length > 0) recommendations.add("Desafie o Perfeccionismo: Permita-se entregar tarefas 'boas o suficiente' em vez de perfeitas, para reduzir a press√£o e o medo de errar.");
                 if (thoughtTriggers.filter(i => i !== 8).length > 2) recommendations.add("Inicie um 'Di√°rio de Preocupa√ß√µes': Anote seus pensamentos ansiosos. Isso ajuda a externaliz√°-los e a analis√°-los com mais clareza.");
                 if (physicalSymptoms.filter(i => i !== 10).length > 1) recommendations.add("Aprenda a Respira√ß√£o Diafragm√°tica (4-7-8): Inspire por 4s, segure por 7s e expire por 8s. Isso acalma o sistema nervoso e reduz os sintomas f√≠sicos rapidamente.");
                 if (behavSymptoms.includes(0) || behavSymptoms.includes(2)) recommendations.add("Enfrente a Evita√ß√£o: Escolha uma pequena coisa que voc√™ est√° evitando e se proponha a faz√™-la. O al√≠vio de superar o medo √© poderoso.");
                 if (physicalHealthTriggers.includes(1)) recommendations.add("Priorize a Higiene do Sono: Crie uma rotina relaxante antes de dormir. Um sono de qualidade √© um dos pilares para a regula√ß√£o da ansiedade.");

                if (recommendations.size === 0) {
                    planHtml += "<p>Com base em suas respostas, um bom come√ßo √© focar em pr√°ticas gerais de bem-estar, como exerc√≠cios f√≠sicos regulares e t√©cnicas de relaxamento.</p>"
                } else {
                    planHtml += '<ul>';
                    recommendations.forEach(rec => {
                        planHtml += `<li>${rec}</li>`;
                    });
                    planHtml += '</ul>';
                }

                 return planHtml + '</div>';
            }
        }
    </script>
</body>
</html>